<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Writey Deletey</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"/>
</head>
<body style="background-color: slategray">
<div class="px-4 py-5 my-5 text-center">
    <img class="d-block mx-auto mb-4" src="/static/assets/flower1.svg" alt="" width="72" height="57">
    <h1 class="display-5 fw-bold text-body-emphasis">Writey Deletey</h1>
    <div class="col-lg-6 mx-auto">
        <form method="get" action="{{ url_for('time_up') }}" >
            <textarea id="textarea" placeholder="start typing here" rows="8" cols="40" autofocus wrap="hard"
                      spellcheck="false" style="border: 3px solid black"></textarea>
           <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
               <p class="timertext" style="font-size: 1.5rem;">If you are idle for more than 5 seconds, you will lose
                ALL your work</p>
               <button type="submit" id="submit" class="btn btn-outline-secondary btn-lg px-4" hidden="hidden"></button>
            </div>
        </form>
    </div>
</div>
<script type="text/javascript">
    let timer, currSeconds = 0;
    function resetTimer() {
        document.querySelector(".timertext").style.display = 'none';
        clearInterval(timer);
        currSeconds = 0;
        timer = setInterval(startIdleTimer, 1000);
    };

// Define the events that would reset the timer
    window.onkeypress = resetTimer;

    function startIdleTimer() {
        currSeconds++;
        if (currSeconds >= 5){
           document.getElementById("submit").click();
           document.querySelector(".btn").submit();

        };
    }
</script>
</body>
</html>